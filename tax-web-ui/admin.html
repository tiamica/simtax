<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="adminDashboard">Tax Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .app-header img {
            height: 40px;
            margin-right: 1rem;
        }

        .app-header h1 {
            color: #333;
            font-size: 1.5rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tab {
            padding: 0.8rem 1.5rem;
            background: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tab.active {
            background: #007bff;
            color: white;
        }

        .panel {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .panel.active {
            display: block;
        }

        .search-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .search-bar input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .search-bar button {
            padding: 0.8rem 1.5rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .pagination button {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
        }

        .pagination button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .analytics-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .analytics-card h3 {
            font-size: 1rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .analytics-value {
            font-size: 2rem;
            font-weight: 600;
            color: #007bff;
        }

        .chart-container {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
            height: 300px;
        }

        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-active {
            background: #cce5ff;
            color: #004085;
        }

        .status-paid {
            background: #d4edda;
            color: #155724;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 600px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            margin: 0;
            color: #333;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #666;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
        }

        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
        }

        /* Language selector specific styles for admin panel */
        .language-selector-container {
            display: flex;
            align-items: center;
            margin-left: auto;
            padding: 0.5rem;
        }
        
        .language-selector-container label {
            margin-right: 0.5rem;
            color: #333;
        }
        
        .language-selector {
            padding: 0.4rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-header">
            <img src="Fourier-Analytics-Logo.png" alt="Fourier Analytics Logo">
            <h1 data-i18n="adminDashboard">Tax Admin Dashboard</h1>
            
            <!-- Language selector -->
            <div class="language-selector-container">
                <label for="languageSelector" data-i18n="language">Language:</label>
                <select id="languageSelector" class="language-selector">
                    <option value="en" data-i18n="english">English</option>
                    <option value="ig" data-i18n="igbo">Igbo</option>
                    <option value="yo" data-i18n="yoruba">Yoruba</option>
                    <option value="ha" data-i18n="hausa">Hausa</option>
                </select>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showPanel('dashboard')" data-i18n="dashboard">Dashboard</button>
            <button class="tab" onclick="showPanel('users')" data-i18n="users">Users</button>
            <button class="tab" onclick="showPanel('payments')" data-i18n="payments">Payments</button>
            <button class="tab" onclick="showPanel('reports')" data-i18n="reports">Reports</button>
            <button class="tab" onclick="showPanel('settings')" data-i18n="settings">Settings</button>
        </div>

        <div id="dashboard" class="panel active">
            <h2 data-i18n="dashboardOverview">Dashboard Overview</h2>
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3 data-i18n="totalUsers">Total Users</h3>
                    <div class="analytics-value">1,248</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="totalRevenue">Total Revenue</h3>
                    <div class="analytics-value">₦15.7M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="pendingPayments">Pending Payments</h3>
                    <div class="analytics-value">₦2.3M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="complianceRate">Compliance Rate</h3>
                    <div class="analytics-value">78%</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 data-i18n="revenueOverTime">Revenue Over Time</h3>
                <canvas id="revenueChart"></canvas>
            </div>

            <div class="chart-container">
                <h3 data-i18n="userRegistrations">User Registrations</h3>
                <canvas id="userChart"></canvas>
            </div>
        </div>

        <div id="users" class="panel">
            <h2 data-i18n="manageUsers">Manage Users</h2>
            <div class="search-bar">
                <input type="text" id="userSearchInput" data-i18n-placeholder="searchUsers" placeholder="Search users by phone or TIN...">
                <button onclick="searchUsers()" data-i18n="search">Search</button>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th data-i18n="phoneNumber">Phone Number</th>
                        <th data-i18n="taxId">Tax ID</th>
                        <th data-i18n="registrationDate">Registration Date</th>
                        <th data-i18n="lastActivity">Last Activity</th>
                        <th data-i18n="taxStatus">Tax Status</th>
                        <th data-i18n="actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <!-- User data will be populated here -->
                </tbody>
            </table>

            <div class="pagination" id="usersPagination">
                <!-- Pagination will be populated here -->
            </div>
        </div>

        <!-- Continue with other panels... -->

    </div>

    <script src="translations.js"></script>
    <script src="language-switcher.js"></script>
    <script>
        // Setup language selector to handle changes
        document.getElementById('languageSelector').addEventListener('change', function() {
            updateLanguage(this.value);
        });
        
        // Initialize the page with language selector
        document.addEventListener('DOMContentLoaded', function() {
            // Apply the stored language or default to English
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            document.getElementById('languageSelector').value = lang;
            
            // Apply translations
            updateLanguage(lang);
        });
        
        // Add translations specific to the admin panel
        if (translations) {
            Object.keys(translations).forEach(lang => {
                // Admin dashboard translations
                translations[lang].adminDashboard = {
                    'en': 'Tax Admin Dashboard',
                    'ig': 'Obosara Onye Njikwa Ụtụ Isi',
                    'yo': 'Dasibodu Alakoso Owo Ori',
                    'ha': 'Dashbord na Ma\'aikatan Haraji'
                }[lang];
                
                translations[lang].dashboard = {
                    'en': 'Dashboard',
                    'ig': 'Obosara',
                    'yo': 'Dasibodu',
                    'ha': 'Dashbord'
                }[lang];
                
                translations[lang].users = {
                    'en': 'Users',
                    'ig': 'Ndị ọrụ',
                    'yo': 'Awọn olumulo',
                    'ha': 'Masu amfani'
                }[lang];
                
                translations[lang].payments = {
                    'en': 'Payments',
                    'ig': 'Ụgwọ',
                    'yo': 'Awọn isanwo',
                    'ha': 'Biyan kuɗi'
                }[lang];
                
                translations[lang].reports = {
                    'en': 'Reports',
                    'ig': 'Akụkọ',
                    'yo': 'Awọn ijabọ',
                    'ha': 'Rahotanni'
                }[lang];
                
                translations[lang].settings = {
                    'en': 'Settings',
                    'ig': 'Ntọala',
                    'yo': 'Ètò',
                    'ha': 'Saituna'
                }[lang];
                
                translations[lang].dashboardOverview = {
                    'en': 'Dashboard Overview',
                    'ig': 'Nchịkọta Obosara',
                    'yo': 'Akopọ Dasibodu',
                    'ha': 'Takaitaccen Bayanin Dashbord'
                }[lang];
                
                translations[lang].totalUsers = {
                    'en': 'Total Users',
                    'ig': 'Ndị ọrụ niile',
                    'yo': 'Gbogbo Awọn olumulo',
                    'ha': 'Jimlar Masu amfani'
                }[lang];
                
                translations[lang].totalRevenue = {
                    'en': 'Total Revenue',
                    'ig': 'Ego mmekọta niile',
                    'yo': 'Owo gbigba lapapọ',
                    'ha': 'Jimlar Kudin shiga'
                }[lang];
                
                translations[lang].pendingPayments = {
                    'en': 'Pending Payments',
                    'ig': 'Ụgwọ na-echere',
                    'yo': 'Awọn isanwo to n duro',
                    'ha': 'Biyan kuɗin da ke jira'
                }[lang];
                
                translations[lang].complianceRate = {
                    'en': 'Compliance Rate',
                    'ig': 'Ọnụ ọgụgụ ndabara',
                    'yo': 'Oṣuwọn ifọkansi',
                    'ha': 'Ma\'aunin biyayya'
                }[lang];
                
                translations[lang].revenueOverTime = {
                    'en': 'Revenue Over Time',
                    'ig': 'Ego mmekọta na mgbe',
                    'yo': 'Owo gbigba lori akoko',
                    'ha': 'Kudin shiga a lokaci'
                }[lang];
                
                translations[lang].userRegistrations = {
                    'en': 'User Registrations',
                    'ig': 'Ndebanyere aha ndị ọrụ',
                    'yo': 'Iforukọsilẹ Awọn olumulo',
                    'ha': 'Rajistan Masu amfani'
                }[lang];
                
                translations[lang].manageUsers = {
                    'en': 'Manage Users',
                    'ig': 'Jikwaa ndị ọrụ',
                    'yo': 'Ṣakoso Awọn olumulo',
                    'ha': 'Sarrafa Masu amfani'
                }[lang];
                
                translations[lang].searchUsers = {
                    'en': 'Search users by phone or TIN...',
                    'ig': 'Chọọ ndị ọrụ site na ekwentị ma ọ bụ TIN...',
                    'yo': 'Wa awọn olumulo nipasẹ fonu tabi TIN...',
                    'ha': 'Bincika masu amfani ta hanyar lambar waya ko TIN...'
                }[lang];
                
                translations[lang].search = {
                    'en': 'Search',
                    'ig': 'Chọọ',
                    'yo': 'Wa',
                    'ha': 'Bincika'
                }[lang];
                
                translations[lang].phoneNumber = {
                    'en': 'Phone Number',
                    'ig': 'Nọmba Ekwentị',
                    'yo': 'Nọmba Fonu',
                    'ha': 'Lambar Waya'
                }[lang];
                
                translations[lang].taxId = {
                    'en': 'Tax ID',
                    'ig': 'Nọmba Ụtụ Isi',
                    'yo': 'Nọmba idanimo Owo Ori',
                    'ha': 'Lambar Gano na Haraji'
                }[lang];
                
                translations[lang].registrationDate = {
                    'en': 'Registration Date',
                    'ig': 'Ụbọchị ndebanye aha',
                    'yo': 'Ọjọ iforukọsilẹ',
                    'ha': 'Ranar Rajista'
                }[lang];
                
                translations[lang].lastActivity = {
                    'en': 'Last Activity',
                    'ig': 'Mmemme ikpeazụ',
                    'yo': 'Iṣẹ ikẹhin',
                    'ha': 'Aiki na Karshe'
                }[lang];
                
                translations[lang].taxStatus = {
                    'en': 'Tax Status',
                    'ig': 'Ọnọdụ Ụtụ Isi',
                    'yo': 'Ipo Owo Ori',
                    'ha': 'Matsayin Haraji'
                }[lang];
                
                translations[lang].actions = {
                    'en': 'Actions',
                    'ig': 'Omume',
                    'yo': 'Awọn igbesẹ',
                    'ha': 'Ayyuka'
                }[lang];
            });
        }
        
        // Function to show panel when tab is clicked
        function showPanel(panelId) {
            // Hide all panels
            document.querySelectorAll('.panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected panel
            document.getElementById(panelId).classList.add('active');
            
            // Add active class to clicked tab
            const tabs = document.querySelectorAll('.tab');
            for (let i = 0; i < tabs.length; i++) {
                if (tabs[i].getAttribute('onclick').includes(panelId)) {
                    tabs[i].classList.add('active');
                    break;
                }
            }
        }
        
        // Function to search users
        function searchUsers() {
            const searchTerm = document.getElementById('userSearchInput').value.trim();
            // In a real application, this would make an API call
            // For now, we'll just populate with dummy data
            populateUserTable();
        }
        
        // Function to populate user table with dummy data
        function populateUserTable() {
            const tableBody = document.getElementById('usersTableBody');
            tableBody.innerHTML = '';
            
            const dummyUsers = [
                { phone: '2348012345678', tin: 'TIN123456', regDate: '2023-01-15', lastActivity: '2023-06-20', status: 'active' },
                { phone: '2348023456789', tin: 'TIN234567', regDate: '2023-02-10', lastActivity: '2023-06-18', status: 'pending' },
                { phone: '2348034567890', tin: 'TIN345678', regDate: '2023-03-05', lastActivity: '2023-06-15', status: 'paid' },
                { phone: '2348045678901', tin: 'TIN456789', regDate: '2023-04-20', lastActivity: '2023-06-10', status: 'active' },
                { phone: '2348056789012', tin: 'TIN567890', regDate: '2023-05-12', lastActivity: '2023-06-05', status: 'pending' }
            ];
            
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            
            dummyUsers.forEach(user => {
                const row = document.createElement('tr');
                
                // Translate status
                const statusText = {
                    'active': {
                        'en': 'Active',
                        'ig': 'Na-arụ ọrụ',
                        'yo': 'Ni iṣẹ́',
                        'ha': 'Aiki'
                    },
                    'pending': {
                        'en': 'Pending',
                        'ig': 'Na-echere',
                        'yo': 'N duro',
                        'ha': 'Jira'
                    },
                    'paid': {
                        'en': 'Paid',
                        'ig': 'Akwụọla',
                        'yo': 'Ti san',
                        'ha': 'An biya'
                    }
                }[user.status][lang];
                
                // Create row with translated status
                row.innerHTML = `
                    <td>${user.phone}</td>
                    <td>${user.tin}</td>
                    <td>${user.regDate}</td>
                    <td>${user.lastActivity}</td>
                    <td><span class="status-badge status-${user.status}">${statusText}</span></td>
                    <td>
                        <button class="action-btn" data-i18n="view">View</button>
                        <button class="action-btn" data-i18n="edit">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Apply translations to newly added elements
            updateLanguage(lang);
        }
        
        // Initialize charts
        function initCharts() {
            // Revenue chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Revenue (₦ millions)',
                        data: [2.1, 1.8, 2.7, 3.2, 2.9, 3.0],
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // User registrations chart
            const userCtx = document.getElementById('userChart').getContext('2d');
            const userChart = new Chart(userCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'New Users',
                        data: [125, 156, 183, 207, 238, 256],
                        backgroundColor: '#28a745'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
        
        // Update language selector to handle changes
        function setupLanguageSelector() {
            document.getElementById('languageSelector').addEventListener('change', function() {
                const lang = this.value;
                updateLanguage(lang);
                populateUserTable(); // Refresh the table with translated content
            });
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Apply the stored language or default to English
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            document.getElementById('languageSelector').value = lang;
            
            // Apply translations
            updateLanguage(lang);
            
            // Initialize charts
            initCharts();
            
            // Populate user table with dummy data
            populateUserTable();
            
            // Setup language selector
            setupLanguageSelector();
        });
    </script>
</body>
</html> 