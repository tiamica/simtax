<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="adminDashboard">Tax Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .app-header img {
            height: 40px;
            margin-right: 1rem;
        }

        .app-header h1 {
            color: #333;
            font-size: 1.5rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tab {
            padding: 0.8rem 1.5rem;
            background: #f0f2f5;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: #333;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: #e0e6f0;
        }

        .tab.active {
            background: #007bff;
            color: white;
            border-color: #0056b3;
        }

        .panel {
            display: none;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .panel.active {
            display: block;
        }

        .search-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .search-bar input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .search-bar button {
            padding: 0.8rem 1.5rem;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .pagination button {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
        }

        .pagination button.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .analytics-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .analytics-card h3 {
            font-size: 1rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .analytics-value {
            font-size: 2rem;
            font-weight: 600;
            color: #007bff;
        }

        .chart-container {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
            height: 300px;
        }

        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-active {
            background: #cce5ff;
            color: #004085;
        }

        .status-paid {
            background: #d4edda;
            color: #155724;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 600px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            margin: 0;
            color: #333;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #666;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
        }

        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            text-align: center;
        }

        /* Language selector specific styles for admin panel */
        .language-selector-container {
            display: flex;
            align-items: center;
            margin-left: auto;
            padding: 0.5rem;
        }
        
        .language-selector-container label {
            margin-right: 0.5rem;
            color: #333;
        }
        
        .language-selector {
            padding: 0.4rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: white;
        }

        .action-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f8f9fa;
            cursor: pointer;
            margin-right: 0.3rem;
            color: #333;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-header">
            <img src="Fourier-Analytics-Logo.png" alt="Fourier Analytics Logo">
            <h1 data-i18n="adminDashboard">Tax Admin Dashboard</h1>
            
            <!-- Language selector -->
            <div class="language-selector-container">
                <label for="languageSelector" data-i18n="language">Language:</label>
                <select id="languageSelector" class="language-selector">
                    <option value="en" data-i18n="english">English</option>
                    <option value="ig" data-i18n="igbo">Igbo</option>
                    <option value="yo" data-i18n="yoruba">Yoruba</option>
                    <option value="ha" data-i18n="hausa">Hausa</option>
                </select>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showPanel('dashboard')" data-i18n="dashboard">Dashboard</button>
            <button class="tab" onclick="showPanel('users')" data-i18n="users">Users</button>
            <button class="tab" onclick="showPanel('payments')" data-i18n="payments">Payments</button>
            <button class="tab" onclick="showPanel('reports')" data-i18n="reports">Reports</button>
            <button class="tab" onclick="showPanel('settings')" data-i18n="settings">Settings</button>
        </div>

        <div id="dashboard" class="panel active">
            <h2 data-i18n="dashboardOverview">Dashboard Overview</h2>
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3 data-i18n="totalUsers">Total Users</h3>
                    <div class="analytics-value">1,248</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="totalRevenue">Total Revenue</h3>
                    <div class="analytics-value">₦15.7M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="pendingPayments">Pending Payments</h3>
                    <div class="analytics-value">₦2.3M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="complianceRate">Compliance Rate</h3>
                    <div class="analytics-value">78%</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 data-i18n="revenueOverTime">Revenue Over Time</h3>
                <canvas id="revenueChart"></canvas>
            </div>

            <div class="chart-container">
                <h3 data-i18n="userRegistrations">User Registrations</h3>
                <canvas id="userChart"></canvas>
            </div>
        </div>

        <div id="users" class="panel">
            <h2 data-i18n="manageUsers">Manage Users</h2>
            <div class="search-bar">
                <input type="text" id="userSearchInput" data-i18n-placeholder="searchUsers" placeholder="Search users by phone or TIN...">
                <button onclick="searchUsers()" data-i18n="search">Search</button>
                <div style="display: flex; margin-left: 10px; gap: 10px;">
                    <select id="statusFilter" style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="all" data-i18n="allStatuses">All Statuses</option>
                        <option value="active" data-i18n="activeStatus">Active</option>
                        <option value="pending" data-i18n="pendingStatus">Pending</option>
                        <option value="paid" data-i18n="paidStatus">Paid</option>
                    </select>
                    <select id="yearFilter" style="padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="all" data-i18n="allYears">All Years</option>
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                    </select>
                </div>
            </div>

            <table class="data-table">
                <thead>
                    <tr>
                        <th data-i18n="phoneNumber">Phone Number</th>
                        <th data-i18n="taxId">Tax ID</th>
                        <th data-i18n="registrationDate">Registration Date</th>
                        <th data-i18n="lastActivity">Last Activity</th>
                        <th data-i18n="taxStatus">Tax Status</th>
                        <th data-i18n="actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <!-- User data will be populated here -->
                </tbody>
            </table>

            <div class="pagination" id="usersPagination">
                <!-- Pagination will be populated here -->
            </div>
        </div>

        <div id="payments" class="panel">
            <h2 data-i18n="paymentsAnalytics">Payments Analytics</h2>
            
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3 data-i18n="totalCollected">Total Collected</h3>
                    <div class="analytics-value">₦21.4M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="pendingAmount">Pending Amount</h3>
                    <div class="analytics-value">₦5.2M</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="averagePayment">Average Payment</h3>
                    <div class="analytics-value">₦125K</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="paymentGrowth">Payment Growth</h3>
                    <div class="analytics-value">+12.5%</div>
                </div>
            </div>

            <div class="chart-container">
                <h3 data-i18n="paymentsOverYears">Payments Across Years</h3>
                <canvas id="paymentsYearlyChart"></canvas>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <div class="chart-container">
                    <h3 data-i18n="monthlyTrends">Monthly Payment Trends</h3>
                    <canvas id="paymentsMonthlyChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3 data-i18n="paymentDistribution">Payment Distribution</h3>
                    <canvas id="paymentDistributionChart"></canvas>
                </div>
            </div>

            <h3 data-i18n="recentTransactions">Recent Transactions</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th data-i18n="dateTime">Date & Time</th>
                        <th data-i18n="taxpayer">Taxpayer</th>
                        <th data-i18n="amount">Amount</th>
                        <th data-i18n="taxYear">Tax Year</th>
                        <th data-i18n="method">Method</th>
                        <th data-i18n="status">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2023-06-20 14:35</td>
                        <td>2348012345678</td>
                        <td>₦45,000</td>
                        <td>2023</td>
                        <td>Bank Transfer</td>
                        <td><span class="status-badge status-paid">Completed</span></td>
                    </tr>
                    <tr>
                        <td>2023-06-19 11:22</td>
                        <td>2348023456789</td>
                        <td>₦78,500</td>
                        <td>2023</td>
                        <td>Mobile Money</td>
                        <td><span class="status-badge status-paid">Completed</span></td>
                    </tr>
                    <tr>
                        <td>2023-06-18 09:45</td>
                        <td>2348034567890</td>
                        <td>₦125,000</td>
                        <td>2023</td>
                        <td>USSD</td>
                        <td><span class="status-badge status-active">Processing</span></td>
                    </tr>
                    <tr>
                        <td>2023-06-17 16:10</td>
                        <td>2348045678901</td>
                        <td>₦32,750</td>
                        <td>2023</td>
                        <td>Bank Transfer</td>
                        <td><span class="status-badge status-pending">Pending</span></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="reports" class="panel">
            <h2 data-i18n="taxReports">Tax Reports</h2>
            
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3 data-i18n="totalReports">Total Reports</h3>
                    <div class="analytics-value">24</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="lastGenerated">Last Generated</h3>
                    <div class="analytics-value">Today</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="scheduledReports">Scheduled Reports</h3>
                    <div class="analytics-value">8</div>
                </div>
                <div class="analytics-card">
                    <h3 data-i18n="reportTemplates">Report Templates</h3>
                    <div class="analytics-value">12</div>
                </div>
            </div>

            <!-- Report Example 1: Revenue Breakdown by Region -->
            <div class="chart-container">
                <h3 data-i18n="revenueByRegion">Revenue Breakdown by Region</h3>
                <p style="margin-bottom: 1rem; color: #666;">This report shows the distribution of tax revenue across different regions in the current fiscal year.</p>
                <canvas id="regionRevenueChart"></canvas>
            </div>

            <!-- Report Example 2: Compliance Rate Trends -->
            <div class="chart-container">
                <h3 data-i18n="complianceTrends">Tax Compliance Rate Trends</h3>
                <p style="margin-bottom: 1rem; color: #666;">This report tracks taxpayer compliance rates over time, highlighting seasonal patterns and overall trends.</p>
                <canvas id="complianceChart"></canvas>
            </div>

            <!-- Report Example 3: Income vs Tax Paid Analysis -->
            <div class="chart-container">
                <h3 data-i18n="incomeVsTax">Income vs Tax Paid Analysis</h3>
                <p style="margin-bottom: 1rem; color: #666;">This report analyzes the relationship between reported income and taxes paid across different income brackets.</p>
                <canvas id="incomeTaxChart"></canvas>
            </div>

            <div style="margin-top: 2rem;">
                <h3 data-i18n="generateNewReport">Generate New Report</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; margin-top: 1rem;">
                    <div>
                        <label for="reportType" data-i18n="reportType">Report Type:</label>
                        <select id="reportType" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px; margin-top: 0.5rem;">
                            <option value="revenue">Revenue Analysis</option>
                            <option value="compliance">Compliance Analysis</option>
                            <option value="demographic">Demographic Analysis</option>
                            <option value="payment">Payment Patterns</option>
                            <option value="custom">Custom Report</option>
                        </select>
                    </div>
                    <div>
                        <label for="reportPeriod" data-i18n="reportPeriod">Time Period:</label>
                        <select id="reportPeriod" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px; margin-top: 0.5rem;">
                            <option value="current">Current Year</option>
                            <option value="last">Last Year</option>
                            <option value="5years">Last 5 Years</option>
                            <option value="custom">Custom Period</option>
                        </select>
                    </div>
                    <div>
                        <label for="reportFormat" data-i18n="reportFormat">Format:</label>
                        <select id="reportFormat" style="width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px; margin-top: 0.5rem;">
                            <option value="pdf">PDF</option>
                            <option value="excel">Excel</option>
                            <option value="csv">CSV</option>
                            <option value="dashboard">Dashboard View</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary" style="margin-top: 1rem;" data-i18n="generateReport">Generate Report</button>
            </div>
        </div>

        <div id="settings" class="panel">
            <h2 data-i18n="systemSettings">System Settings</h2>
            
            <div style="text-align: center; padding: 4rem 2rem; background-color: #f9f9f9; border-radius: 8px; margin: 2rem 0;">
                <img src="Fourier-Analytics-Logo.png" alt="Fourier Analytics Logo" style="width: 100px; margin-bottom: 1rem; opacity: 0.6;">
                <h3 style="margin-bottom: 1rem; color: #666;" data-i18n="comingSoon">Coming Soon</h3>
                <p style="color: #888; max-width: 600px; margin: 0 auto;" data-i18n="settingsDescription">
                    The settings section is currently under development. In the future, you will be able to configure system preferences, 
                    manage user roles and permissions, customize notifications, and set up automated reporting schedules.
                </p>
            </div>
        </div>
    </div>

    <script src="translations.js"></script>
    <script src="language-switcher.js"></script>
    <script>
        // Setup language selector to handle changes
        document.getElementById('languageSelector').addEventListener('change', function() {
            updateLanguage(this.value);
        });
        
        // Initialize the page with language selector
        document.addEventListener('DOMContentLoaded', function() {
            // Apply the stored language or default to English
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            document.getElementById('languageSelector').value = lang;
            
            // Apply translations
            updateLanguage(lang);
        });
        
        // Add translations specific to the admin panel
        if (translations) {
            Object.keys(translations).forEach(lang => {
                // Admin dashboard translations
                translations[lang].adminDashboard = {
                    'en': 'Tax Admin Dashboard',
                    'ig': 'Obosara Onye Njikwa Ụtụ Isi',
                    'yo': 'Dasibodu Alakoso Owo Ori',
                    'ha': 'Dashbord na Ma\'aikatan Haraji'
                }[lang];
                
                translations[lang].dashboard = {
                    'en': 'Dashboard',
                    'ig': 'Obosara',
                    'yo': 'Dasibodu',
                    'ha': 'Dashbord'
                }[lang];
                
                translations[lang].users = {
                    'en': 'Users',
                    'ig': 'Ndị ọrụ',
                    'yo': 'Awọn olumulo',
                    'ha': 'Masu amfani'
                }[lang];
                
                translations[lang].payments = {
                    'en': 'Payments',
                    'ig': 'Ụgwọ',
                    'yo': 'Awọn isanwo',
                    'ha': 'Biyan kuɗi'
                }[lang];
                
                translations[lang].reports = {
                    'en': 'Reports',
                    'ig': 'Akụkọ',
                    'yo': 'Awọn ijabọ',
                    'ha': 'Rahotanni'
                }[lang];
                
                translations[lang].settings = {
                    'en': 'Settings',
                    'ig': 'Ntọala',
                    'yo': 'Ètò',
                    'ha': 'Saituna'
                }[lang];
                
                translations[lang].dashboardOverview = {
                    'en': 'Dashboard Overview',
                    'ig': 'Nchịkọta Obosara',
                    'yo': 'Akopọ Dasibodu',
                    'ha': 'Takaitaccen Bayanin Dashbord'
                }[lang];
                
                translations[lang].totalUsers = {
                    'en': 'Total Users',
                    'ig': 'Ndị ọrụ niile',
                    'yo': 'Gbogbo Awọn olumulo',
                    'ha': 'Jimlar Masu amfani'
                }[lang];
                
                translations[lang].totalRevenue = {
                    'en': 'Total Revenue',
                    'ig': 'Ego mmekọta niile',
                    'yo': 'Owo gbigba lapapọ',
                    'ha': 'Jimlar Kudin shiga'
                }[lang];
                
                translations[lang].pendingPayments = {
                    'en': 'Pending Payments',
                    'ig': 'Ụgwọ na-echere',
                    'yo': 'Awọn isanwo to n duro',
                    'ha': 'Biyan kuɗin da ke jira'
                }[lang];
                
                translations[lang].complianceRate = {
                    'en': 'Compliance Rate',
                    'ig': 'Ọnụ ọgụgụ ndabara',
                    'yo': 'Oṣuwọn ifọkansi',
                    'ha': 'Ma\'aunin biyayya'
                }[lang];
                
                translations[lang].revenueOverTime = {
                    'en': 'Revenue Over Time',
                    'ig': 'Ego mmekọta na mgbe',
                    'yo': 'Owo gbigba lori akoko',
                    'ha': 'Kudin shiga a lokaci'
                }[lang];
                
                translations[lang].userRegistrations = {
                    'en': 'User Registrations',
                    'ig': 'Ndebanyere aha ndị ọrụ',
                    'yo': 'Iforukọsilẹ Awọn olumulo',
                    'ha': 'Rajistan Masu amfani'
                }[lang];
                
                translations[lang].manageUsers = {
                    'en': 'Manage Users',
                    'ig': 'Jikwaa ndị ọrụ',
                    'yo': 'Ṣakoso Awọn olumulo',
                    'ha': 'Sarrafa Masu amfani'
                }[lang];
                
                translations[lang].searchUsers = {
                    'en': 'Search users by phone or TIN...',
                    'ig': 'Chọọ ndị ọrụ site na ekwentị ma ọ bụ TIN...',
                    'yo': 'Wa awọn olumulo nipasẹ fonu tabi TIN...',
                    'ha': 'Bincika masu amfani ta hanyar lambar waya ko TIN...'
                }[lang];
                
                translations[lang].search = {
                    'en': 'Search',
                    'ig': 'Chọọ',
                    'yo': 'Wa',
                    'ha': 'Bincika'
                }[lang];
                
                translations[lang].phoneNumber = {
                    'en': 'Phone Number',
                    'ig': 'Nọmba Ekwentị',
                    'yo': 'Nọmba Fonu',
                    'ha': 'Lambar Waya'
                }[lang];
                
                translations[lang].taxId = {
                    'en': 'Tax ID',
                    'ig': 'Nọmba Ụtụ Isi',
                    'yo': 'Nọmba idanimo Owo Ori',
                    'ha': 'Lambar Gano na Haraji'
                }[lang];
                
                translations[lang].registrationDate = {
                    'en': 'Registration Date',
                    'ig': 'Ụbọchị ndebanye aha',
                    'yo': 'Ọjọ iforukọsilẹ',
                    'ha': 'Ranar Rajista'
                }[lang];
                
                translations[lang].lastActivity = {
                    'en': 'Last Activity',
                    'ig': 'Mmemme ikpeazụ',
                    'yo': 'Iṣẹ ikẹhin',
                    'ha': 'Aiki na Karshe'
                }[lang];
                
                translations[lang].taxStatus = {
                    'en': 'Tax Status',
                    'ig': 'Ọnọdụ Ụtụ Isi',
                    'yo': 'Ipo Owo Ori',
                    'ha': 'Matsayin Haraji'
                }[lang];
                
                translations[lang].actions = {
                    'en': 'Actions',
                    'ig': 'Omume',
                    'yo': 'Awọn igbesẹ',
                    'ha': 'Ayyuka'
                }[lang];
            });
        }
        
        // Function to show panel when tab is clicked
        function showPanel(panelId) {
            // Hide all panels
            document.querySelectorAll('.panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected panel
            document.getElementById(panelId).classList.add('active');
            
            // Add active class to clicked tab
            const tabs = document.querySelectorAll('.tab');
            for (let i = 0; i < tabs.length; i++) {
                if (tabs[i].getAttribute('onclick').includes(panelId)) {
                    tabs[i].classList.add('active');
                    break;
                }
            }
        }
        
        // Function to search users
        function searchUsers() {
            const searchTerm = document.getElementById('userSearchInput').value.trim();
            // In a real application, this would make an API call
            // For now, we'll just populate with dummy data
            populateUserTable();
        }
        
        // Function to populate user table with dummy data
        function populateUserTable() {
            const tableBody = document.getElementById('usersTableBody');
            tableBody.innerHTML = '';
            
            const dummyUsers = [
                { phone: '2348012345678', tin: 'TIN123456', regDate: '2023-01-15', lastActivity: '2023-06-20', status: 'active' },
                { phone: '2348023456789', tin: 'TIN234567', regDate: '2023-02-10', lastActivity: '2023-06-18', status: 'pending' },
                { phone: '2348034567890', tin: 'TIN345678', regDate: '2023-03-05', lastActivity: '2023-06-15', status: 'paid' },
                { phone: '2348045678901', tin: 'TIN456789', regDate: '2023-04-20', lastActivity: '2023-06-10', status: 'active' },
                { phone: '2348056789012', tin: 'TIN567890', regDate: '2023-05-12', lastActivity: '2023-06-05', status: 'pending' }
            ];
            
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            
            dummyUsers.forEach(user => {
                const row = document.createElement('tr');
                
                // Translate status
                const statusText = {
                    'active': {
                        'en': 'Active',
                        'ig': 'Na-arụ ọrụ',
                        'yo': 'Ni iṣẹ́',
                        'ha': 'Aiki'
                    },
                    'pending': {
                        'en': 'Pending',
                        'ig': 'Na-echere',
                        'yo': 'N duro',
                        'ha': 'Jira'
                    },
                    'paid': {
                        'en': 'Paid',
                        'ig': 'Akwụọla',
                        'yo': 'Ti san',
                        'ha': 'An biya'
                    }
                }[user.status][lang];
                
                // Create row with translated status
                row.innerHTML = `
                    <td>${user.phone}</td>
                    <td>${user.tin}</td>
                    <td>${user.regDate}</td>
                    <td>${user.lastActivity}</td>
                    <td><span class="status-badge status-${user.status}">${statusText}</span></td>
                    <td>
                        <button class="action-btn" data-i18n="view">View</button>
                        <button class="action-btn" data-i18n="edit">Edit</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Apply translations to newly added elements
            updateLanguage(lang);
        }
        
        // Initialize charts
        function initCharts() {
            // Revenue chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            const revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Revenue (₦ millions)',
                        data: [2.1, 1.8, 2.7, 3.2, 2.9, 3.0],
                        borderColor: '#007bff',
                        backgroundColor: 'rgba(0, 123, 255, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // User registrations chart
            const userCtx = document.getElementById('userChart').getContext('2d');
            const userChart = new Chart(userCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'New Users',
                        data: [125, 156, 183, 207, 238, 256],
                        backgroundColor: '#28a745'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
        
        // Initialize payments charts
        function initPaymentsCharts() {
            // Payments across years chart
            if (document.getElementById('paymentsYearlyChart')) {
                const yearlyCtx = document.getElementById('paymentsYearlyChart').getContext('2d');
                const yearlyChart = new Chart(yearlyCtx, {
                    type: 'bar',
                    data: {
                        labels: ['2018', '2019', '2020', '2021', '2022', '2023'],
                        datasets: [{
                            label: 'Payments (₦ millions)',
                            data: [8.4, 10.2, 9.5, 12.8, 15.6, 21.4],
                            backgroundColor: '#17a2b8'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Amount (₦ millions)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Monthly payment trends chart
            if (document.getElementById('paymentsMonthlyChart')) {
                const monthlyCtx = document.getElementById('paymentsMonthlyChart').getContext('2d');
                const monthlyChart = new Chart(monthlyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: '2022',
                            data: [1.2, 1.3, 1.8, 1.1, 1.4, 1.5, 1.2, 1.3, 1.4, 1.6, 1.7, 1.1],
                            borderColor: '#6c757d',
                            backgroundColor: 'transparent',
                            tension: 0.4
                        }, {
                            label: '2023',
                            data: [1.5, 1.7, 2.1, 1.8, 2.2, 2.5, 2.3, 2.1, 2.4, 2.6, 2.8, 2.7],
                            borderColor: '#007bff',
                            backgroundColor: 'transparent',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
            
            // Payment distribution chart (pie chart)
            if (document.getElementById('paymentDistributionChart')) {
                const distributionCtx = document.getElementById('paymentDistributionChart').getContext('2d');
                const distributionChart = new Chart(distributionCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Bank Transfer', 'Mobile Money', 'USSD', 'Cash', 'Other'],
                        datasets: [{
                            data: [45, 30, 15, 7, 3],
                            backgroundColor: [
                                '#007bff',
                                '#28a745',
                                '#ffc107',
                                '#dc3545',
                                '#6c757d'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            }
                        }
                    }
                });
            }
        }
        
        // Initialize reports charts
        function initReportsCharts() {
            // Revenue by region chart
            if (document.getElementById('regionRevenueChart')) {
                const regionCtx = document.getElementById('regionRevenueChart').getContext('2d');
                const regionChart = new Chart(regionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['South West', 'South East', 'South South', 'North Central', 'North West', 'North East'],
                        datasets: [{
                            label: 'Revenue (₦ millions)',
                            data: [4.2, 3.5, 3.8, 2.9, 3.2, 2.4],
                            backgroundColor: '#20c997'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y'
                    }
                });
            }
            
            // Compliance rate trends chart
            if (document.getElementById('complianceChart')) {
                const complianceCtx = document.getElementById('complianceChart').getContext('2d');
                const complianceChart = new Chart(complianceCtx, {
                    type: 'line',
                    data: {
                        labels: ['2018', '2019', '2020', '2021', '2022', '2023'],
                        datasets: [{
                            label: 'Compliance Rate (%)',
                            data: [62, 65, 63, 68, 72, 78],
                            borderColor: '#fd7e14',
                            backgroundColor: 'rgba(253, 126, 20, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                min: 50,
                                max: 100
                            }
                        }
                    }
                });
            }
            
            // Income vs Tax Paid Analysis chart
            if (document.getElementById('incomeTaxChart')) {
                const incomeTaxCtx = document.getElementById('incomeTaxChart').getContext('2d');
                const incomeTaxChart = new Chart(incomeTaxCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Taxpayers',
                            data: [
                                {x: 0.5, y: 0.04}, {x: 0.8, y: 0.06}, {x: 1.2, y: 0.09},
                                {x: 1.5, y: 0.12}, {x: 1.8, y: 0.15}, {x: 2.2, y: 0.19},
                                {x: 2.5, y: 0.22}, {x: 2.8, y: 0.26}, {x: 3.2, y: 0.31},
                                {x: 3.5, y: 0.35}, {x: 4.0, y: 0.42}, {x: 4.5, y: 0.48},
                                {x: 5.0, y: 0.56}, {x: 5.5, y: 0.65}, {x: 6.0, y: 0.72},
                                {x: 7.0, y: 0.85}, {x: 8.0, y: 1.05}, {x: 9.0, y: 1.25},
                                {x: 10.0, y: 1.45}
                            ],
                            backgroundColor: '#6f42c1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Annual Income (₦ millions)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Tax Paid (₦ millions)'
                                }
                            }
                        }
                    }
                });
            }
        }
        
        // Update language selector to handle changes
        function setupLanguageSelector() {
            document.getElementById('languageSelector').addEventListener('change', function() {
                const lang = this.value;
                updateLanguage(lang);
                populateUserTable(); // Refresh the table with translated content
            });
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Apply the stored language or default to English
            const lang = localStorage.getItem('taxAppLanguage') || 'en';
            document.getElementById('languageSelector').value = lang;
            
            // Apply translations
            updateLanguage(lang);
            
            // Initialize charts
            initCharts();
            
            // Initialize payments charts
            initPaymentsCharts();
            
            // Initialize reports charts
            initReportsCharts();
            
            // Setup language selector
            setupLanguageSelector();
            
            // Populate user table
            populateUserTable();
        });
    </script>
</body>
</html> 